// =============================================================================
// 04-atoms/_accessibility.scss
//
// Accessibility utilities: visually-hidden helper, focus management,
// skip-navigation link, and preference-respecting overrides.
// =============================================================================

// ---------------------------------------------------------------------------
// Visually hidden — hides content visually while keeping it available
// to assistive technologies.
// To temporarily make content visible again (e.g. on focus), use
// .visually-hidden.focusable — see the skip-link below for reference.
// ---------------------------------------------------------------------------
@layer theme-atoms {
.visually-hidden {
    position: absolute;
    width:    1px;
    height:   1px;
    padding:  0;
    margin:   -1px;
    overflow: hidden;
    clip:     rect(0, 0, 0, 0);
    white-space: nowrap;
    border:   0;
}

// ---------------------------------------------------------------------------
// Skip navigation link
// Positioned off-screen and revealed on keyboard focus.
// Override --skip-link-bg and --skip-link-text to customise the colours.
// ---------------------------------------------------------------------------
.skip-link {
    --skip-link-bg:   var(--color-primary);
    --skip-link-text: #ffffff;

    position:   absolute;
    inset-block-start:  var(--space-sm);
    inset-inline-start: var(--space-sm);
    z-index:    9999;
    transform:  translateY(calc(-100% - var(--space-xl)));
    transition: transform 200ms ease;

    display:       inline-block;
    padding:       var(--space-sm) var(--space-md);
    background:    var(--skip-link-bg);
    color:         var(--skip-link-text);
    font-weight:   var(--font-weight-bold);
    text-decoration: none;
    border-radius: var(--layout-radius);

    &:focus {
        transform: translateY(0);
        outline: 3px solid var(--color-accent);
        outline-offset: 2px;
    }
}

// ---------------------------------------------------------------------------
// Focus ring
// TYPO3 backend and custom components often strip :focus styles.
// Re-establish a visible, theme-coloured ring globally.
// ---------------------------------------------------------------------------
:focus-visible {
    outline:        2px solid var(--color-primary);
    outline-offset: 2px;
    border-radius:  var(--layout-radius);
}

// Remove focus ring for mouse users (already handled by :focus-visible).
:focus:not(:focus-visible) {
    outline: none;
}

// ---------------------------------------------------------------------------
// Motion preferences — disable animations for users who request it.
// ---------------------------------------------------------------------------
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration:       0.01ms !important;
        animation-iteration-count: 1     !important;
        transition-duration:      0.01ms !important;
        scroll-behavior:          auto   !important;
    }
}

// ---------------------------------------------------------------------------
// Contrast preferences
// ---------------------------------------------------------------------------
@media (prefers-contrast: more) {
    :root {
        --color-text:       #000000;
        --color-background: #ffffff;
        --color-border:     #000000;
    }
}

@media (prefers-contrast: less) {
    :root {
        --color-text:       #191919;
        --color-background: #f3f3f3;
    }
}

}