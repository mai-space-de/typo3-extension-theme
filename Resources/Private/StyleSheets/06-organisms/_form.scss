// =============================================================================
// 06-organisms/_form.scss
//
// Form organism — wraps multiple form-field molecules into a complete form
// layout. Supports standard, grid, inline, and search layout patterns.
//
// Markup patterns:
//
//   Standard:     <form class="form"> … </form>
//   Grid layout:  <form class="form"><div class="form-grid"> … </div></form>
//   Inline:       <form class="form"><div class="form-inline"> … </div></form>
//   Search:       <form class="form-search"> … </form>
//
// Override --form-* custom properties to customise.
// =============================================================================

@layer theme-organisms {
:root {
    --form-max-width: 600px;
    --form-gap:       var(--space-lg);
    --form-grid-min:  250px;
}

// ---------------------------------------------------------------------------
// Base form wrapper
// ---------------------------------------------------------------------------
.form {
    display:        flex;
    flex-direction: column;
    gap:            var(--form-gap);
    max-width:      var(--form-max-width);

    // Reset browser default margin.
    margin-block-end: 0;
}

// ---------------------------------------------------------------------------
// Fieldset and legend
// ---------------------------------------------------------------------------
fieldset {
    border:        1px solid var(--color-border);
    border-radius: var(--layout-radius);
    padding:       var(--space-md);
    margin:        0;
}

legend {
    font-weight: var(--font-weight-bold);
    font-size:   var(--font-size-base);
    padding-inline: var(--space-xs);
}

// ---------------------------------------------------------------------------
// Grid layout — auto-fill columns, min 250px each (override --form-grid-min).
// ---------------------------------------------------------------------------
.form-grid {
    display:               grid;
    grid-template-columns: repeat(auto-fill, minmax(var(--form-grid-min), 1fr));
    gap:                   var(--space-md);
}

// ---------------------------------------------------------------------------
// Row layout — inline fields side by side, wrapping on overflow.
// ---------------------------------------------------------------------------
.form-row {
    display:     flex;
    flex-wrap:   wrap;
    gap:         var(--space-md);
    align-items: flex-end;

    > .form-field {
        flex: 1 1 var(--form-grid-min);
    }
}

// ---------------------------------------------------------------------------
// Inline layout — label and input on one line.
// ---------------------------------------------------------------------------
.form-inline {
    display:     flex;
    flex-wrap:   wrap;
    gap:         var(--space-sm);
    align-items: flex-end;

    .form-field {
        flex-direction: row;
        align-items:    center;
        gap:            var(--space-sm);

        label {
            white-space: nowrap;
            flex-shrink: 0;
        }
    }
}

// ---------------------------------------------------------------------------
// Search form — compact search bar (input + submit button fused).
// ---------------------------------------------------------------------------
.form-search {
    display:   flex;
    gap:       0;

    input[type="search"],
    input[type="text"] {
        flex:          1 1 auto;
        border-inline-end-width: 0;
        border-start-end-radius: 0;
        border-end-end-radius:   0;
    }

    button,
    input[type="submit"] {
        flex-shrink:              0;
        border-start-start-radius: 0;
        border-end-start-radius:   0;
    }
}

// ---------------------------------------------------------------------------
// Form actions — submit button row at the foot of the form.
// ---------------------------------------------------------------------------
.form-actions {
    display:          flex;
    flex-wrap:        wrap;
    gap:              var(--space-sm);
    align-items:      center;
    border-block-start: 1px solid var(--color-border);
    padding-block-start: var(--space-md);

    > button,
    > .button,
    > input[type="submit"] {
        min-width: 8rem;
    }
}

// ---------------------------------------------------------------------------
// Validation state indicators on the form wrapper
// ---------------------------------------------------------------------------
.form-success {
    border-inline-start: 4px solid var(--color-success);
    padding-inline-start: var(--space-md);
}

.form-error {
    border-inline-start: 4px solid var(--color-danger);
    padding-inline-start: var(--space-md);
}

}